<!DOCTYPE html>
<html>
<head>
<title>Tomato Ripeness Detector</title>
<style>
video,img{width:90%;max-width:400px;}
button{padding:10px;background:red;color:white;}
</style>
</head>
<body>

<h2>Tomato Ripeness Detector</h2>

<video id="camera" autoplay playsinline></video><br>
<button onclick="send()">Scan Tomato</button>
<p id="status"></p>
<img id="result"/>

<script>
const API = "https://your-render-domain.onrender.com/detect";

navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}})
.then(s=>camera.srcObject=s);

async function send(){
  const c=document.createElement("canvas");
  c.width=camera.videoWidth;
  c.height=camera.videoHeight;
  c.getContext("2d").drawImage(camera,0,0);

  const blob = await new Promise(r=>c.toBlob(r,"image/jpeg"));

  const fd = new FormData();
  fd.append("image", blob);

  let res = await fetch(API,{method:"POST",body:fd});
  let data = await res.json();

  status.textContent = data.status;
  if(data.image_base64) result.src = "data:image/jpeg;base64," + data.image_base64;
}
</script>

</body>
</html>

